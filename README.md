# discount
优惠计算

# How

## 大纲
优惠类型: 套餐优惠、优惠券(待实现)、兑换券(待实现)、分时促销(待实现)
优惠策略: 互斥(选最佳)、叠加 (待实现)
价格计算 (待实现)

## 优惠类型
### 套餐优惠:
套餐优惠方案中具备时间限制、商品套餐限制，根据当前时间、商品从多个套餐优惠方案中匹配其中一个最佳套餐。(待整合实现)

#### 时间策略:
匹配符合的时间组合
时间类型:单个日期时间段、多个周期性时间段(时间段可跨天、时间段不可重叠)、多个周几

##### 整体
例如:
组合A:
方案日期时间段: 2022.11.01 00:00 - 2022.11.05 23:59
周期性时间段: ['21:00 - 03:00', '04:00 - 10:00', '11:00 - 15:00']
周: [1, 2, 3, 4, 5, 6, 7]

组合B:
方案日期时间段: 2022.11.04 00:00 - 2022.11.08 23:59
周期性时间段: ['21:00 - 03:00', '04:00 - 10:00', '11:00 - 15:00']
周: [1, 2, 3, 4, 5, 6, 7]

组合C:
方案日期时间段: 2022.11.01 00:00 - 2022.11.03 23:59
周期性时间段: ['21:00 - 03:00', '04:00 - 10:00', '11:00 - 15:00']
周: [1, 2, 4, 5, 6, 7]

场景1:(2022.11.09周三)
2022.11.09 23:59	未命中

场景2:(2022.11.09周三)
2022.11.09 02:00 组合B

场景3:(2022.11.03周四)
2022.11.03 14:00 组合C、组合A

场景4:(2022.11.02周三)
2022.11.02 14:00 组合A

场景5:(2022.11.05周六)
2022.11.05 22:00 组合A、组合B

#### 商品策略
根据商品选择优惠力度最大的套餐

例如:

套餐A: [雪碧*1, 可乐* 1] 优惠1元
套餐B: [矿泉水*1, 可乐* 1] 优惠1元
套餐C: [雪碧*1, 可乐* 1, 矿泉水*1] 优惠2元
套餐D: [雪碧*2, 可乐* 1] 优惠3元
套餐E: [薯片*2 ] 优惠5元


场景1: 完全匹配
雪碧*1、可乐*1 -> 套餐A
场景2: 匹配且数量有多
雪碧*1、可乐*2 -> 套餐A

场景3: 匹配多个选最优
雪碧*2, 可乐* 1, 矿泉水*1 -> 套餐C& 套餐D -> 套餐C

场景4: 无匹配
可乐 * 1 -> 无

场景5: 无匹配
薯片 * 2 -> 套餐E(套餐价格大于原价)